# Задание 33.3. Генераторы коллекций. list, dict, set comprehensions

## Блок урока
«Dict comprehensions» позволяет конструировать словари с вычисляемыми значениями и фильтрами в одной компактной записи.

## Условие задачи
**Сложность**: <span style="color: #c62828">● сложный</span>. примерное время: 15–20 минут

У тебя есть список `pipelines`, где каждый элемент — словарь с ключами `"name"`, `"steps"`, `"owner"`. Поле `"steps"` — список словарей `{ "title": str, "duration": int, "is_async": bool }`. Построй одним dict comprehension словарь `pipeline_stats`, где ключ — название пайплайна, а значение — словарь вида `{ "owner": <строка>, "async_ratio": <float> }`. Значение `async_ratio` — доля шагов с `is_async == True`, округлённая до двух знаков. В результат должны попасть только пайплайны, у которых суммарная длительность всех шагов не превышает 240 минут и шагов не меньше трёх.

## Пример входных данных
```
pipelines = [
    {
        "name": "ETL",
        "owner": "Антон",
        "steps": [
            {"title": "extract", "duration": 60, "is_async": False},
            {"title": "transform", "duration": 90, "is_async": True},
            {"title": "load", "duration": 80, "is_async": True}
        ]
    },
    {
        "name": "Realtime",
        "owner": "Борис",
        "steps": [
            {"title": "ingest", "duration": 120, "is_async": True},
            {"title": "fanout", "duration": 150, "is_async": True}
        ]
    }
]
```

## Пример выходных данных
```
{
    'ETL': {'owner': 'Антон', 'async_ratio': 0.67}
}
```

## Критерии успешного выполнения
- `pipeline_stats` формируется единственным dict comprehension.
- Включаются только пайплайны с тремя и более шагами и суммарной длительностью ≤ 240.
- Доля асинхронных шагов округляется до двух знаков через `round(...)`.
- Исходный список `pipelines` не изменяется.

## Подсказки
- Подготовь функцию или переменную для суммы длительностей, чтобы не дублировать код внутри comprehension.
- Для подсчёта асинхронных шагов используй генератор `sum(1 for step in steps if step["is_async"])`.
- Не забывай приводить деление к `float`, иначе округление будет некорректным.

## Частые ошибки и ограничения
- Создание промежуточных словарей в цикле нарушает требование.
- Отсутствие проверки количества шагов приводит к делению на ноль.
- Следи, чтобы списки в файле не превышали пяти пунктов.
